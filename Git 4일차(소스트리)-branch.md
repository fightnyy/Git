# 브랜치

* 커밋은 바로전 커밋을 가리키고 있다.
* 만약에 2명이서 협업해야한다고 하면 줄기가 하나일때는 자연스럽지 못하다. 이때는 자연스럽게 두줄로 갈래가 나뉘어야 한다. 
* 특정기준에서 줄기를 나누어 작업할 수 있는 기능을 __브랜치__ 라고 한다. 새로운가지로 커밋을 만들려면 반드시 브랜치를 해야한다.
* 만약 하나의 브랜치에서 2명이 작업한걸 올린다면 먼저 푸시한 커밋은 정상적으로 올라가지만 뒤늦게 푸시한 다른커밋은 '너는 낡은 코드에 푸시를 하는것이다. 최신코드에서 푸시해라'라는 오류가 난다.
* __master__ 는 Git에서 제공하는 기본적인 브랜치이다. 

* 예를들어 첫 번째 commit을 하면 자동으로 master라는 이름의 브랜치가 커밋을 가르킨다. 새로운 commit이 오면 master브랜치는 새로운 commit을 가르킨다.

* 여기서 가르킨다 라는 애매한 표현을 쓰는데 바로 브랜치가 __나무가지처럼 물리적으로 '길'이 존재해서 그길에 올리는 것이 아니라 단순 **`포인터`** 이기 때문이다.__

* 실제로 물리적인 길을 만들었다면 프로젝트를 다 복사해서 진행했어야 한다. 이는 시간이 상당히 많이 소요된다.(SVN은 그렇게함) 하지만 Git은 가볍기 때문에 포인터로 했고 이렇게만해도 브랜치가 가능하다.

  ```
  예를들어 내가
  커밋1  <-  커밋2 <- 커밋3 이런식으로 있다고 했을때 지금 master브랜치는 커밋 3을 가리키고 있고 내가 커밋3 상태에서 새로운 브랜치를 만들었다면(첫걸음 이라고 하겠다.)첫걸음과 master가 가르키는 커밋은 커밋3으로 같다. 내가 여기서 첫걸음 브랜치에 커밋을 한번 더 하면 첫걸음 브런치는 master브런치에 비해 한 커밋 더 앞서나간다. 그상태에서 master브런치로 이동해 commit을 한번 더 하면 이제 [첫걸음]과 [master]브랜치는 눈에 띄게 갈라진다. 
  ```

  그럼 여기서 branch 끼리는 어떻게 이동할 수 있을까? __[HEAD]__ 라는 특수 포인터가 그 비법이다. 

### HEAD

* __브랜치__ 혹은 __커밋__을 가리키는 포인터
* 타임머신 역할이라고 볼 수있다. 

예를 들면 [HEAD]브랜치는 [첫걸음]or[master]과 같은 브랜치를 가리킬 수 도 있고 커밋 2 같은 커밋을 가리킬 수 도 있다.

단, [HEAD]와 [master]브랜치 포인터가 떨어져 있으면 '분리된 HEAD(Detached HEAD)'상태가 된다.



## 협업

* 이제 브랜치도 만들어 보며 협업에 대한 감을 익혀보자. 여러 사람이 작업하는 원격저장소에는 미리 브랜치 규칙을 정하는 것이 일반적이다. 

  ```
  예시
  1. [master]브랜치에는 직접 커밋을 올리지 않는다.(동시에 작업하다 꼬일 수 있으니).
  2. 기능 개발을 하기전에 [master]브랜치 기준으로 새로운 브랜치를 만든다.
  3. 이 브랜치 이름은 [feature/기능이름]형식으로 하고 한명만 커밋을 올린다.
  4.[feature/기능이름]브랜치에서 기능 개발이 끝나면 [master]브랜치에 이를 합친다.
  
  즉 각자 작업할[feature/기능이름]의 브랜치를 만들고 작업을 완료하면 [master]에서 합친다는 의미이다.
  
  ```



<hr>

### 소스트리에서 브랜치 만드는법

1. [브랜치]아이콘을 클릭하고 브랜치이름과 현재브랜치를 확인하고 '새브랜치 체크아웃'을 체크한다음 브랜치를 생성한다.

   __checkout__(체크아웃)은 브랜치를 이동하는 명령어이다. 그래서[새 브랜치 체크아웃]체크박스를 체크하면 브랜치도 만들어지고 그 브랜치로 이동을 한다.(체크를 해제하면 브랜치는 만들어지지만 [HEAD]는 여전히 [master]브랜치를 가리킨다.)

2. 브랜치 이름에'/'를 넣으면 앞에 적은 텍스트(feature)가 마치 폴더처럼 구분되어 보여진다. 이건 소스트리의 편의기능 텍스트가 두껍게 보여지는것을 통해 [feature/detail-page]에 있다는 것을 알수있음

3. 이제 여기서 새로운 작업을 하고 커밋을 하고 푸쉬를 하면 깃허브 [Branch]를 클릭하면 [feature/detail-page]가 보일 것이다. 



<hr>

### 소스트리에서 브랜치 이동하는법

* 해당 브랜치를 더블클릭한다.
* branch 창에서 해당 브랜치에 우클릭 누르고 [...체크아웃]누르면 된다.



__Tip__ 

1.소스트리에서 스테이지에 올라간 파일들을 보면 파일명 앞에 노란색 네모 또는 초록색 아이콘이 있는 것을 볼 수 있다.

* 노란색아이콘: 수정한 파일
* 초록색아이콘: 새로 추가된 파일

2. 파일을 올릴때 내가 올린 파일에 로컬저장소(.git)이 있다면 그 파일을 원격저장소에 올릴시 그 파일이 클릭이 되지 않는다. 따라서 해당파일 안에 있는 원격저장소를 삭제 하고 올려줘야 한다.

